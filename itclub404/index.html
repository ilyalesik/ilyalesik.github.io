<!DOCTYPE html>
<html lang="ru">
<head>
	<title>Вся правда о CSS-in-JS</title>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="shower/themes/ribbon/styles/screen-16x10.css">
	<link rel="stylesheet" href="./style.css">
	<link href="./prism.css" rel="stylesheet" />
	<link href="./browser-mockup.css" rel="stylesheet" />
</head>
<body class="shower list">
	<script src="prism.js"></script>
	<script>
	Prism.languages.insertBefore('jsx', 'template-string', {
  'styled-template-string': {
    pattern: /(styled(\.\w+|\([^\)]*\))(\.\w+(\([^\)]*\))*)*|css|injectGlobal|keyframes|\.extend)`(?:\$\{[^}]+\}|\\\\|\\?[^\\])*?`/,
    lookbehind: true,
    greedy: true,
    inside: {
      interpolation: {
        pattern: /\$\{[^}]+\}/,
        inside: {
          'interpolation-punctuation': {
            pattern: /^\$\{|\}$/,
            alias: 'punctuation'
          },
          rest: Prism.languages.jsx
        }
      },
      string: {
        pattern: /[^$;]+/,
        inside: Prism.languages.css,
        alias: 'language-css'
      }
    }
  }
})
	</script>

	<header class="caption">
		<h1>Вся правда о CSS-in-JS</h1>
		<p>Ilya Lesik</p>
	</header>

	<section class="slide first-slide">
		<h2 class="first-slide__header">Вся правда о CSS-in-JS</h2>
		<p class="first-slide__paragraph">Илья Лесик</p>
		<figure>
			<img class="cover" src="pictures/itclub-cover.jpg" alt="Hands on the orange typewriter in a park">
		</figure>
	</section>

	<section class="slide disclaimer-slide">
		<h2>Disclaimer</h2>
		<p class="note">Примеры далее используют React и Styled Components</p>
		<div class="disclaimer">
			<img class="disclaimer__img disclaimer__react" 
					src="./pictures/ReactJS.png" />
			<span class="disclaimer__plus">+</span>
			<img class="disclaimer__img disclaimer__styled-components" 
					src="./pictures/styled-components-logo.png" />		
		</div>
	</section>

	<section class="slide">
		<h2>Что такое CSS-in-JS</h2>
		<pre class="language-jsx styled-code" id="example1"></pre>
		<script type="text/javascript">
		const code1 = (`const Button = styled.button\`
  border-radius: 3px;
  padding: 0.25em 1em;
  margin: 0 1em;
  background: transparent;
  color: palevioletred;
  border: 2px solid palevioletred;

  \$\{props => props.primary && css\`
    background: palevioletred;
    color: white;
  \`\}
\`;`);
		var html = Prism.highlight(code1, Prism.languages.jsx, 'jsx');
        document.getElementById("example1").innerHTML = html;
		</script>
		<p class="note">Выражения <span class="inline-js">fn`some string here`;</span> называются Tagged Template Literal</p>
	</section>

	<section class="slide">
		<h2>Что такое CSS-in-JS</h2>
		<div class="code-browser-container">
		<pre class="language-jsx styled-code" id="example2"></pre>
		<script type="text/javascript">
	const code2 = (`const Component = () => (
	<div>
		<Button>Normal Button</Button>
		<Button primary>Primary Button</Button>
	</div>
);`);
		var html = Prism.highlight(code2, Prism.languages.jsx, 'jsx');
        document.getElementById("example2").innerHTML = html;
		</script>

		<div class="browser-mockup">
  			<div class="button-container">
				<button class="button">Normal Button</button>
				<button class="button button__primary">Primary Button</button>
			</div>
		</div>
	</div>
	<p class="p-without-margin">В DOM-дерево будет добавлено:</p>
		<pre class="dom-output">
			<code>&lt;style type="text/css"&gt;</code>
<code>  .eIxVkz{border-radius:3px;...}</code>
<code>  .kqEuGv{border-radius:3px;...;background:palevioletred;color:white;}</code>
<code>&lt;/style&gt;</code>
		</pre>
	</section>

	<section class="slide">
		<h2>Расширение стилей</h2>
		<div class="code-browser-container">
		<pre class="language-jsx styled-code" id="example3"></pre>
		<script type="text/javascript">
	const code3 = (`const Button = styled.button\`
  color: palevioletred;
  font-size: 1em;
  margin: 1em;
  padding: 0.25em 1em;
  border: 2px solid palevioletred;
  border-radius: 3px;
\`;

const TomatoButton = Button.extend\`
  color: tomato;
  border-color: tomato;
\`;`);
		var html = Prism.highlight(code3, Prism.languages.jsx, 'jsx');
        document.getElementById("example3").innerHTML = html;
		</script>

		<div class="browser-mockup">
  			<div class="button-container">
				<button class="button">Normal Button</button>
				<button class="button button__tomato">Tomato Button</button>
			</div>
		</div>
	</div>
	</section>

	<section class="slide">
		<h2>А может, не надо?</h2>
		<figure>
			<blockquote>
				<p>О нет, хипстеры опять хотят переусложнить нашу верстку и изобретают новые абстракции над абстракциями. Нам было так хорошо с ванильным CSS, версткой на таблицах и браузером Netscape Navigator 4. Именно с этого вашего Реакта и начался Майдан.</p>
			</blockquote>
			<figcaption>Неизвестный верстальщик</figcaption>
		</figure>
	</section>

	<section class="slide">
		<h2>В чем профит?</h2>
		<ul class="plus-list">
			<li>Более лаконичный код</li>
			<div class="code-compare">
				<div class="code-compare__example1">
					<span>React + classnames</span>
				<pre class="language-jsx styled-code" id="example-compare-1"></pre>
			</div>
				<span class="code-compare__splitter">vs</span>
				<div class="code-compare__example2">
					<span>React + Styled Components</span>
				<pre class="language-jsx styled-code " id="example-compare-2"></pre>
			</div>
			</div>
		</ul>
		<script type="text/javascript">
	const exampleCompare1 = (`<li 
	key={city.id}
	className={classNames("citySelect_item", {
	"-current": currentCityId === city.id
	})}>
	{city.name}
</li>
`);
		var html1 = Prism.highlight(exampleCompare1, Prism.languages.jsx, 'jsx');
        document.getElementById("example-compare-1").innerHTML = html1;

        const exampleCompare2 = (`<CitySelectItem 
    key={city.id}
	current={currentCityId === city.id}>
	{city.name}
</CitySelectItem>
`);
		var html2 = Prism.highlight(exampleCompare2, Prism.languages.jsx, 'jsx');
        document.getElementById("example-compare-2").innerHTML = html2;
		</script>
	</section>

	<section class="slide">
		<ul class="plus-list">
			<li>Общий код у CSS и у JS</li>
		</ul>
		<pre class="language-jsx styled-code" 
					id="animation-code"></pre>
		<script type="text/javascript">
		const code = (`    const duration = 500;

    const Element = styled.div\`
        ...
        transition: transform \$\{duration\}ms;
    \`;

    class SomeComponent extends Component {
    	componentDidMount() {
    		this.startAnimation(duration);
    	}
    }
        `);
		var html = Prism.highlight(code, Prism.languages.jsx, 'jsx');
        document.getElementById("animation-code").innerHTML = html;
		</script>
	</section>

	<section class="slide plus-minus-slide">
		<h2>Еще плюсы:</h2>
		<ul class="plus-list">
			<li>Проще конфигурировать (webpack, node.js)</li>
			<li>Изоляция стилей</li>
			<li>Переносимый код</li>
			<li>Code-splitting стилей при использовании SSR</li>
		</ul>
		<h2>Есть и недостатки:</h2>
		<ul class="minus-list">
			<li>Более сложный debug</li>
			<li>Нет source-maps, либо нет выгрузки в CSS-файл</li>
		</ul>
	</section>

	<section class="slide">
		<h2>Инструменты</h2>

		<span>Плагины для редакторов / IDE</span>
		<div class="ide-list">
			<div class="ide-list__item">
				<img src="./pictures/atom.png" />
				<span>Atom</span>
			</div>
			<div class="ide-list__item">
				<img src="./pictures/sublime-text.jpg" />
				<span>Sublime Text</span>
			</div>
			<div class="ide-list__item">
				<img src="./pictures/visual-studio-code.png" />
				<span>VS Code</span>
			</div>
			<div class="ide-list__item">
				<img class="ide-list__item" src="./pictures/vim.png" />
				<span>VIM</span>
				<span>NeoVim</span>
			</div>
			<div class="ide-list__item">
				<img class="ide-list__item" src="./pictures/webstorm.png" />
				<span>WebStorm</span>
				<span>+ другие</span>
				<span>JetBrains IDE</span>
			</div>
		</div>
	</slide>

	<div class="progress"></div>

	<script src="shower/shower.min.js"></script>
	
	<!-- Copyright © 2017 Yours Truly, Famous Inc. -->

</body>
</html>
