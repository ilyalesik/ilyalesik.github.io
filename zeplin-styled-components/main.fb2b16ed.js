!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.extension=t():e.extension=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.MAX_BRIGHTNESS=255,t.HUE_MAX_DEGREE=360,t.MAX_PERCENTAGE=100,t.HEX_BASE=16,t.JSON_SPACING=2,t.NUMERICAL_FONT_BOLD=700,t.NUMERICAL_FONT_NORMAL=400,t.REACT_RULES_WITH_COLOR=["backgroundColor","borderColor","color","shadowColor","textDecorationColor","textShadowColor"],t.HTML_TAGS=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","slot","small","source","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"],t.OPTION_NAMES={COLOR_FORMAT:"colorFormat",SHOW_DIMENSIONS:"showDimensions",SHOW_DEFAULT_VALUES:"showDefaultValues",DEFAULT_TAG:"defaultTag"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(5);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var n=r(6);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})});var a=r(7);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var i=r(8);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),n=r(0);function a(e,t){var r={colorFormat:e.getOption(n.OPTION_NAMES.COLOR_FORMAT)};return{code:(0,o.getStyleguideColorsCode)(r,t),language:"javascript"}}function i(e,t){var r={colorFormat:e.getOption(n.OPTION_NAMES.COLOR_FORMAT),defaultValues:e.getOption(n.OPTION_NAMES.SHOW_DEFAULT_VALUES)};return{code:(0,o.getStyleguideTextStylesCode)(r,e.project,t),language:"javascript"}}t.default={layer:function(e,t){var r={showDimensions:e.getOption(n.OPTION_NAMES.SHOW_DIMENSIONS),colorFormat:e.getOption(n.OPTION_NAMES.COLOR_FORMAT),defaultValues:e.getOption(n.OPTION_NAMES.SHOW_DEFAULT_VALUES),defaultTag:e.getOption(n.OPTION_NAMES.DEFAULT_TAG)};return{code:(0,o.getLayerCode)(e.project,t,r),language:"javascript"}},styleguideColors:a,styleguideTextStyles:i,comment:function(e,t){return`// ${t}`},exportStyleguideColors:function(e,t){return{code:a(e,t).code,filename:"colors.js",language:"javascript"}},exportStyleguideTextStyles:function(e,t){return{code:i(e,t).code,filename:"fonts.js",language:"javascript"}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLayerCode=t.getStyleguideTextStylesCode=t.getStyleguideColorsCode=void 0;var o=r(4),n=r(1),a=r(0);function i(e,t){var r=new Array(t+1).join(" ");return Object.keys(e).reduce(function(t,o){return`${t}\n${r}${(0,n.camelCaseToDash)(o)}: ${e[o]};`},"")}t.getStyleguideColorsCode=function(e,t){return`export const colors = {\n${function(e,t){return t.map(function(t){var r=(0,n.getColorStringByFormat)(t,e);return`  ${(0,n.generateName)(t.name)}: "${r}"`})}(e.colorFormat,t).join(",\n")}\n};`},t.getStyleguideTextStylesCode=function(e,t,r){var a=(0,o.generateStyleguideTextStylesObject)(e,t,r);return Object.keys(a).reduce(function(e,t){return`${e}\n\nexport const ${(0,n.uppercaseFirst)(t)} = styled.span\`${i(a[t],2)}\n\`;`},"").replace(/"(.+)":/g,"$1:").replace(/: "colors\.(.*)"/g,": colors.$1")},t.getLayerCode=function(e,t,r){var l=r.showDimensions,u=r.colorFormat,s=r.defaultValues,c=r.defaultTag,d=(0,o.generateLayerStyleObject)({layer:t,projectType:e.type,densityDivisor:e.densityDivisor,showDimensions:l,colorFormat:u,defaultValues:s}),f=[];return Object.keys(d).length>1&&f.unshift(d),f.map(function(t){return o=t,l=(0,n.getColorMapByFormat)(e.colors,r.colorFormat),u=c,s=o.selector,delete o.selector,Object.keys(o).forEach(function(e){"mixinEntry"!==e&&a.REACT_RULES_WITH_COLOR.includes(e)&&o[e]in l&&(o[e]=`\${colors.${(0,n.generateName)(l[o[e]])}}`)}),`const ${(0,n.generateName)(s,!1)} = styled.${u}\`${i(o,a.JSON_SPACING).replace(/"(.+)":/g,"$1:").replace(/: "colors\.(.*)"/g,": colors.$1")}\n\`;`;var o,l,u,s}).join("\n\n")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateStyleguideTextStylesObject=t.generateLayerStyleObject=t.generateTextLayerStyleObject=void 0;var o=r(1),n=r(0);function a(e){var t=e.layer,r=e.font,n=e.densityDivisor,a=e.colorFormat,l=i({textStyle:r,densityDivisor:n,colorFormat:a,defaultValues:e.defaultValues,layerStyle:e.layerStyle});if(t.fills&&t.fills.length&&!(0,o.layerHasGradient)(t)){delete l.color;var u=(0,o.blendColors)(t.fills.map(function(e){return e.color}));r.color&&(u=u.blend(r.color)),l.color=(0,o.getColorStringByFormat)(u,a)}return l}function i(e){var t=e.textStyle,r=e.densityDivisor,a=e.colorFormat,i=e.defaultValues,l=e.layerStyle,u=(0,o.selectorize)(t.name);(0,o.isHtmlTag)(u)||(u=u.substring(1));var s,c={selector:u};if(c.fontFamily=t.fontFamily,c.fontSize=(0,o.round)(t.fontSize/r,1)+"px",s=l&&l["font-weight"]&&"normal"!==l["font-weight"],t.fontWeight===n.NUMERICAL_FONT_BOLD?c.fontWeight="bold":t.fontWeight!==n.NUMERICAL_FONT_NORMAL?c.fontWeight=String(t.fontWeight):(i||s)&&(c.fontWeight="normal"),s=l&&l["font-style"]&&"normal"!==l["font-style"],t.fontStyle&&("normal"!==t.fontStyle||i||s)&&(c.fontStyle=t.fontStyle),t.lineHeight&&(c.lineHeight=(0,o.round)(t.lineHeight/t.fontSize,2)),s=l&&l["letter-spacing"]&&"normal"!==l["letter-spacing"],t.letterSpacing){c.letterSpacing=(0,o.round)(t.letterSpacing/r,2)}else(i||s)&&(c.letterSpacing=0);return t.textAlign&&(c.textAlign=t.textAlign),t.color&&(c.color=(0,o.getColorStringByFormat)(t.color,a)),c}t.generateTextLayerStyleObject=a,t.generateLayerStyleObject=function(e){var t=e.layer,r=e.projectType,n=e.densityDivisor,i=e.showDimensions,l=e.colorFormat,u=e.defaultValues,s=t.type,c={selector:(0,o.selectorize)(t.name)||".layer"};i&&(c.width=(0,o.round)(t.rect.width/n,1)+"px",c.height=(0,o.round)(t.rect.height/n,1)+"px"),t.rotation&&(c.transform=`rotate(${-t.rotation}deg)`),1!==t.opacity&&(c.opacity=(0,o.round)(t.opacity,2));if(t.borderRadius&&(c.borderRadius=(0,o.round)(t.borderRadius/n,1)+"px"),"text"===s&&t.defaultTextStyle){var d=a({layer:t,font:t.defaultTextStyle,densityDivisor:n,colorFormat:l,defaultValues:u});delete d.selector,Object.assign(c,d)}else!t.fills.length||(0,o.layerHasGradient)(t)||(0,o.layerHasBlendMode)(t)||(c.backgroundColor=(0,o.getColorStringByFormat)((0,o.blendColors)(t.fills.map(function(e){return e.color})),l));return t.shadows.length&&Object.assign(c,function(e){var t=e.shadow,r=e.projectType,n=e.layerType,a=e.densityDivisor,i=e.colorFormat;return"text"===n?{textShadowColor:(0,o.getColorStringByFormat)(t.color,i),textShadowOffset:{width:(0,o.round)(t.offsetX/a,1),height:(0,o.round)(t.offsetY/a,1)},textShadowRadius:(0,o.round)(t.blurRadius/a,1)}:"android"===r?{}:{shadowColor:(0,o.getColorStringByFormat)(t.color,i),shadowOffset:{width:(0,o.round)(t.offsetX/a,1),height:(0,o.round)(t.offsetY/a,1)},shadowRadius:(0,o.round)(t.blurRadius/a,1),shadowOpacity:1}}({shadow:t.shadows[t.shadows.length-1],projectType:r,layerType:s,densityDivisor:n,colorFormat:l})),t.borders.length&&Object.assign(c,function(e,t,r,n){return"text"===t||e.fill&&"gradient"===e.fill.type?{}:{border:`${(0,o.round)(e.thickness/r,1)}px solid ${(0,o.getColorStringByFormat)(e.fill.color,n)}`}}(t.borders[t.borders.length-1],s,n,l)),c},t.generateStyleguideTextStylesObject=function(e,t,r){var n={densityDivisor:t.densityDivisor,colorFormat:e.colorFormat,defaultValues:e.defaultValues};return r.reduce(function(e,r){var a;if(r.color){var l=t.findColorEqual(r.color);a=Object.assign({},n,{projectColor:l})}else a=n;var u=function(e,t){var r=i({textStyle:e,densityDivisor:t.densityDivisor,colorFormat:t.colorFormat,defaultValues:t.defaultValues}),n=(0,o.generateName)(r.selector),a={};return delete r.selector,t.projectColor&&(r.color=`\${colors.${(0,o.generateName)(t.projectColor.name)}}`),a[n]=r,a}(r,a);return Object.assign(e,u)},{})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getColorStringByFormat=t.toDefaultString=t.getColorMapByFormat=t.blendColors=void 0;var o=r(0),n=new Intl.NumberFormat("en-US",{useGrouping:!1,maximumFractionDigits:2});function a(e,t){if("r"in e&&"g"in e&&"b"in e&&"a"in e)switch(t){case"hex":return i(e);case"rgb":return l(e);case"hsl":return function(e){var t=e.toHSL(),r=`${Math.round(t.h*o.HUE_MAX_DEGREE)}, `+`${Math.round(t.s*o.MAX_PERCENTAGE)}%, `+`${Math.round(t.l*o.MAX_PERCENTAGE)}%`;return e.a<1?`hsla(${r}, ${n.format(e.a)})`:`hsl(${r})`}(e);case"default":default:return u(e)}}function i(e,t){var r,n=e.hexBase();if(e.a<1){var a=((r=e.a*o.MAX_BRIGHTNESS)<o.HEX_BASE?"0":"")+r.toString(o.HEX_BASE);n=t?a+n:n+a}return`#${n}`}function l(e){var t=`${Math.round(e.r)}, ${Math.round(e.g)}, ${Math.round(e.b)}`;return e.a<1?`rgba(${t}, ${n.format(e.a)})`:`rgb(${t})`}function u(e){return e.a<1?l(e):i(e)}t.blendColors=function(e){return e.reduce(function(e,t){return e.blend(t)})},t.getColorMapByFormat=function(e,t){return e.reduce(function(e,r){return e[a(r,t)]=r.name,e},{})},t.toDefaultString=u,t.getColorStringByFormat=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectorize=t.round=t.isHtmlTag=void 0;var o=r(0);function n(e){return e.trim().replace(/[^\s\w-]/g,"").replace(/^(-?\d+)+/,"").replace(/\s+/g,"-")}function a(e){return o.HTML_TAGS.includes(e)}t.isHtmlTag=a,t.round=function(e,t){var r=Number(e).toLocaleString("en-US",{useGrouping:!1,maximumFractionDigits:t});return Number(r)},t.selectorize=function(e){if(!e)return"";var t=e.trim();if(a(e))return t.toLowerCase();if(/^[#.]/.test(t)){var r=n(t.substr(1));if(r)return t[0]+r}return(t=n(t))&&`.${t}`}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.layerHasGradient=function(e){return e.fills.some(function(e){return"gradient"===e.type})},t.layerHasBlendMode=function(e){return e.fills.some(function(e){return e.blendMode&&"normal"!==e.blendMode})}},function(e,t,r){"use strict";function o(e){return e.charAt(0).toUpperCase()+e.substring(1)}Object.defineProperty(t,"__esModule",{value:!0}),t.uppercaseFirst=o,t.generateName=function(e,t){return function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.map(o).join("");return t?(n=r,n.charAt(0).toLowerCase()+n.substring(1)):r;var n}(function(e){var t=e.match(/\d+|[a-z]+|[A-Z]+(?![a-z])|[A-Z][a-z]+/g);if(!t)return["invalid","name"];return t.map(function(e){return e.toLowerCase()})}(e),t)},t.camelCaseToDash=function(e){return e.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase()}}]).default});